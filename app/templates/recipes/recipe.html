{% extends "layout.html" %}

{% from "delete-modal.html" import delete_modal %}

{% block body %}
<h1>
    {% if recipe.name %}
    {{ recipe.name }}
    {% else %}
    Unnamed recipe
    {% endif %}
</h1>
<p>
    {% if recipe.description %}
    {{ recipe.description }}
    {% else %}
    No description
    {% endif %}
</p>
<h2>Ingredients</h2>
{% if recipe.ingredient_amounts %}
<ol class="list-group">
    {% for recipe_ingredient in recipe.ingredient_amounts %}
    <li class="list-group-item">
        {{ join_amount(
            recipe_ingredient.amount,
            recipe_ingredient.amount_unit,
        ) }}
        {{ recipe_ingredient.ingredient.name }}
    </li>
    {% endfor %}
</ol>
{% else %}
<p>No ingredients</p>
{% endif %}
<h2>Steps</h2>
<p>
    {% if recipe.steps %}
    {{ recipe.steps }}
    {% else %}
    No steps
    {% endif %}
</p>
<div class="form-group d-flex justify-content-end">
    <a class="btn btn-primary mr-2"
        href="{{ url_for('edit_recipe', recipe_id=recipe.id) }}">
        Edit
    </a>
    <button type="button" class="btn btn-danger" data-toggle="modal"
        data-target="#delete-modal">
        Delete
    </button>
</div>
{{ delete_modal(
    id="delete-modal",
    title="Delete recipe",
    body="Are you sure you want to permanently delete this recipe?",
    action=url_for('delete_recipe', recipe_id=recipe.id),
)}}
{% endblock %}
